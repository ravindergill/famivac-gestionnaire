<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <f:view locale="fr">

        <ui:insert name="metadata"></ui:insert>

        <h:head>
            <title>FAMIVAC (GEST) - <ui:insert name="title"></ui:insert></title>
            <!-- Latest compiled and minified CSS -->
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"/>
            <!-- Optional theme -->
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"/>
            <h:outputStylesheet library="css" name="gestionnaire.css"/>

            <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
            <!--[if lt IE 9]>
              <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
              <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
            <![endif]-->
        </h:head>

        <h:body>
            <p:growl autoUpdate="true"></p:growl>

            <nav class="navbar navbar-inverse navbar-static-top">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <h:link outcome="/index.xhtml" styleClass="navbar-brand" value="FAMIVAC"></h:link>
                    </div>
                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav">
                            <li class="#{view.viewId.startsWith('/famille') ? 'active' : ''}"><h:link outcome="/familles/liste.xhtml" value="Familles"/></li>
                            <li class="#{view.viewId.startsWith('/enfant') ? 'active' : ''}"><h:link outcome="/enfants/liste.xhtml" value="Enfants" /></li>
                            <li class="#{view.viewId.startsWith('/inscripteur') ? 'active' : ''}"><h:link outcome="/inscripteurs/liste.xhtml" value="Inscripteurs" /></li>
                            <li class="#{view.viewId.startsWith('/sejour') ? 'active' : ''}"><h:link outcome="/sejours/liste.xhtml" value="Séjours" /></li>
                            <li class="#{view.viewId.startsWith('/accompagnateur') ? 'active' : ''}"><h:link outcome="/accompagnateurs/liste.xhtml" value="Accompagnateurs" /></li>
                            <li class="#{view.viewId.startsWith('/parametre') ? 'active' : ''}"><h:link rendered="#{request.isUserInRole('ROLE_ADMIN')}" outcome="/parametres/communes.xhtml" value="Paramètres"/></li>
                            <li class="#{view.viewId.startsWith('/monitoring') ? 'active' : ''}"><h:outputLink value="#{request.contextPath}/monitoring" target="_blank" rendered="#{request.isUserInRole('ROLE_MONITORING')}">Monitoring</h:outputLink></li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                                    <span class="glyphicon glyphicon-user" aria-hidden="true"></span>&nbsp;
                                    <h:outputText value="#{sessionBean.connectedUser.prenom} #{sessionBean.connectedUser.nom}"/> 
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu" role="menu">
                                    <li class="#{view.viewId.startsWith('/moncompte') ? 'active' : ''}">
                                        <h:link rendered="#{sessionBean.connectedUser.enabled}" outcome="/moncompte/changerMotDePasse.xhtml" value="Mon compte" />
                                    </li>
                                    <li>
                                        <h:outputLink value="#{request.contextPath}/logout">Déconnexion</h:outputLink>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div><!--/.navbar-collapse -->
                </div>
            </nav>


            <ui:insert name="content"></ui:insert>

            <!--<hr />-->

<!--            <footer class="footer">
                <div class="container">
                    <p class="text-muted">&copy; Une famille pour les vacances - 2015 - #{maven.version['fr.famivac:gestionnaire']}</p>
                </div>
            </footer>-->

            <!-- Latest compiled and minified JavaScript -->
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
            <h:outputScript library="primefaces" name="jquery/jquery.js"/>
            <h:outputScript library="js" name="pf-locale.js"></h:outputScript>
        </h:body>

    </f:view>

</html>

